---
# Install and configure a compute node
# See http://docs.openstack.org/kilo/install-guide/install/apt/content/ch_nova.html#nova-compute-install
- hosts: computes
  roles:
  - role: compute-node
    os_messaging_password: password
    os_messaging_host: controller
    os_compute_admin_password: "{{ NOVA_PASS }}"
    os_identity_host: controller
    os_compute_my_ip: "{{ MANAGEMENT_INTERFACE_IP_ADDRESS }}"
    os_image_host: controller
    os_compute_novncproxy_host: "{{ novncproxy_host }}"
    os_networking_controller_host: controller
    os_networking_admin_password: "{{ NEUTRON_PASS }}"
    os_compute_virt_type: "{{ virt_type }}"
  sudo: yes
